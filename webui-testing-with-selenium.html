<!DOCTYPE html>
<html lang="zh"
>
<head>
    <title>WebUI Testing with Selenium - xgao's blog</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="./webui-testing-with-selenium.html">

        <meta name="author" content="Xin Gao" />
        <meta name="keywords" content="python,autotest,selenium" />
        <meta name="description" content="guide about Selenium Webdriver" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="./theme/css/bootstrap.yeti.min.css" type="text/css"/>
    <link href="./theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="./theme/css/pygments/monokai.css" rel="stylesheet">
    <link rel="stylesheet" href="./theme/css/style.css" type="text/css"/>

        <link href="./feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="xgao's blog RSS Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="./" class="navbar-brand">
xgao's blog            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="./pages/about-me.html">
                             About Me
                          </a></li>
                        <li >
                            <a href="./category/life.html">Life</a>
                        </li>
                        <li class="active">
                            <a href="./category/tech.html">Tech</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="./archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="./webui-testing-with-selenium.html"
                       rel="bookmark"
                       title="Permalink to WebUI Testing with Selenium">
                        WebUI Testing with Selenium
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2014-07-11T00:00:00"> Fri 11 July 2014</time>
    </span>



<span class="label label-default">Tags</span>
	<a href="./tag/python.html">python</a>
        /
	<a href="./tag/autotest.html">autotest</a>
        /
	<a href="./tag/selenium.html">selenium</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>近些年， 随着互联网的爆炸式增长, 各种Web开发框架及相关技术层出不穷，<br />
Web应用变得越来越丰富。
在Web 开发过程中， 除了要编写必要的单元测是代码， 也要编写相应的功能测试代码， 
以实现功能测试的自动化， 从而增加迭代的速度。</p>
<p>在这方面, Selenium Webdriver 无疑是首选。 本文讲述Selenium Webdriver 的及其相关概念, 
及如何用其进行Web功能测试自动化的开发。</p>
<h1>What is Selenium?</h1>
<ul>
<li>Selenium automates browsers. That is it!</li>
<li>What you do with that power is entirely up to you.</li>
<li>Primarily, it is for automating web applications for testing purposes,
  but is certainly not limited to just that.</li>
<li>Boring web-based administration tasks can (and should!)also be automated as well.</li>
<li>Selenium has the support of some of the largest browser vendors 
  who have taken (or are taking) steps to make Selenium a native part of their browser. 
  It is also the core technology in countless other browser automation tools, APIs and frameworks.</li>
</ul>
<h1>Selenium IDE</h1>
<h3>What is Selenium IDE</h3>
<ul>
<li>Selenium IDE is a Firefox plugin which records 
  and plays back user interactions with the browser.</li>
<li>Use this to either create simple scripts or assist in exploratory testing.</li>
</ul>
<h3>Download &amp; Install</h3>
<ul>
<li>Open Firefox web browser</li>
<li>Open this page: and download latest released version <a href="http://release.seleniumhq.org/selenium-ide/2.5.0/selenium-ide-2.5.0.xpi">2.5.0</a></li>
</ul>
<h1>Selenium Server</h1>
<ul>
<li>The Selenium Server is needed in order to run either Selenium RC style scripts 
  or Remote Selenium Webdriver ones.</li>
<li>Download version <a href="http://selenium-release.storage.googleapis.com/2.40/selenium-server-standalone-2.40.0.jar">2.40.0</a></li>
<li>Run in cmd:<div class="highlight"><pre><span class="nv">$ </span>java -jar selenium-server-standalone-2.x.x.jar
</pre></div>


</li>
</ul>
<h1>Other Firefox Plugins</h1>
<ul>
<li>Firebug</li>
<li>Firefinder for Firebug</li>
<li>Xpath Checker</li>
<li>Xpath Finder</li>
</ul>
<h1>How to use Selenium-RC</h1>
<p>The Selenium-RC has been eliminated, So do not need to learn it!!!</p>
<h1>Selenium Webdriver</h1>
<ul>
<li>The biggest change in Selenium recently has been the inclusion of the WebDriver API.</li>
<li>Driving a browser natively as a user would either locally 
  or on a remote machine using the Selenium Server it marks a leap forward in terms of browser automation.</li>
<li><strong>Selenium 1.0 + WebDriver = Selenium 2.0</strong></li>
</ul>
<h1>Python-Selenium</h1>
<ul>
<li>Official API documentation is available <a href="http://selenium.googlecode.com/svn/trunk/docs/api/py/index.html">here</a>.</li>
<li>Selenium Python bindings provides a simple API to write functional/acceptance tests using Selenium WebDriver.</li>
<li>Through Selenium Python API you can access all functionalities of Selenium WebDriver in an intuitive way.</li>
<li>Selenium Python bindings provide a convenient API to access Selenium WebDrivers like Firefox, Ie, Chrome, Remote etc..</li>
<li>The current supported Python versions are 2.6, 2.7, 3.2 and 3.3.</li>
</ul>
<h1>Python-Selenium download &amp; install</h1>
<ul>
<li>Download Python bindings for Selenium from the <a href="http://pypi.python.org/pypi/selenium">PyPI page</a>. </li>
<li>
<p>easy_install:</p>
<div class="highlight"><pre><span class="nv">$ </span>easy_install selenium
</pre></div>


</li>
<li>
<p>pip to install the bindings:      </p>
<div class="highlight"><pre><span class="nv">$ </span>pip install selenium
</pre></div>


</li>
</ul>
<h1>Selenium Webdriver Simple Usage</h1>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.common.keys</span> <span class="kn">import</span> <span class="n">Keys</span>


<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">()</span>

<span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;http://www.python.org&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="s">&quot;Python&quot;</span> <span class="ow">in</span> <span class="n">driver</span><span class="o">.</span><span class="n">title</span>

<span class="n">elem</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;q&quot;</span><span class="p">)</span>
<span class="n">elem</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s">&quot;selenium&quot;</span><span class="p">)</span>
<span class="n">elem</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">RETURN</span><span class="p">)</span>
<span class="k">assert</span> <span class="s">&quot;Google&quot;</span> <span class="ow">in</span> <span class="n">driver</span><span class="o">.</span><span class="n">title</span>

<span class="n">driver</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>


<blockquote>
<p><strong>NOTE:</strong> The above script can be saved into a file <br />
(eg:- python_org_search.py), then it can be run like this:
python python_org_search.py</p>
</blockquote>
<h1>Using Selenium to write tests</h1>
<ul>
<li>The selenium package itself doesn't provide a testing tool/framework.  </li>
<li>You can write test cases using Python's unittest module.   </li>
<li>The other choices as a tool/framework are py.test and nose.</li>
<li>This is a test for python.org search functionality.<div class="highlight"><pre><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.common.keys</span> <span class="kn">import</span> <span class="n">Keys</span>

<span class="k">class</span> <span class="nc">PythonOrgSearch</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">test_search_in_python_org</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">driver</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">driver</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;http://www.python.org&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s">&quot;Python&quot;</span><span class="p">,</span> <span class="n">driver</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;q&quot;</span><span class="p">)</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s">&quot;selenium&quot;</span><span class="p">)</span>
        <span class="n">elem</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">RETURN</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s">&quot;Google&quot;</span><span class="p">,</span> <span class="n">driver</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>


</li>
</ul>
<h1>Using Selenium with remote WebDriver</h1>
<div class="highlight"><pre><span class="nv">$ </span>java -jar selenium-server-standalone-2.x.x.jar
</pre></div>


<p>While running the Selenium server, you could see a message looks like this: 
15:43:07.541 INFO - RemoteWebDriver instances should connect to:  http://127.0.0.1:4444/wd/hub</p>
<p>The above line says that, you can use this URL for connecting to remote WebDriver. Here are some examples:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">selenium.webdriver.common.desired_capabilities</span> <span class="kn">import</span> <span class="n">DesiredCapabilities</span>


    <span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Remote</span><span class="p">(</span>
            <span class="n">command_executor</span><span class="o">=</span><span class="s">&quot;http://127.0.0.1:4444/wd/hub&quot;</span><span class="p">,</span>
            <span class="n">desired_capabilities</span><span class="o">=</span><span class="n">DesiredCapabilities</span><span class="o">.</span><span class="n">CHROME</span><span class="p">)</span>
    <span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Remote</span><span class="p">(</span>
            <span class="n">command_executor</span><span class="o">=</span><span class="s">&quot;http://127.0.0.1:4444/wd/hub&quot;</span><span class="p">,</span>
            <span class="n">desired_capabilities</span><span class="o">=</span><span class="n">DesiredCapabilities</span><span class="o">.</span><span class="n">OPERA</span><span class="p">)</span>
</pre></div>


<h1>Interacting with the page</h1>
<p>For example, given an element defined as:</p>
<div class="highlight"><pre><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;passwd&quot;</span> <span class="na">id=</span><span class="s">&quot;passwd-id&quot;</span> <span class="nt">/&gt;</span>
</pre></div>


<p>you could find it using any of:</p>
<div class="highlight"><pre><span class="n">element</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&quot;passwd-id&quot;</span><span class="p">)</span>
<span class="n">element</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;passwd&quot;</span><span class="p">)</span>
<span class="n">element</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">&quot;//input[@id=&#39;passwd-id&#39;]&quot;</span><span class="p">)</span>
</pre></div>


<h1>Filling in forms</h1>
<div class="highlight"><pre><span class="n">element</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">&quot;//select[@name=&#39;name&#39;]&quot;</span><span class="p">)</span>
<span class="n">all_options</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">find_elements_by_tag_name</span><span class="p">(</span><span class="s">&quot;option&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">all_options</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;Value is: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">option</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">)</span>
    <span class="n">option</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
</pre></div>


<p>WebDriver's support classes
include one called “Select”, which provides useful methods for interacting with these.</p>
<div class="highlight"><pre><span class="n">select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">))</span>
<span class="n">select</span><span class="o">.</span><span class="n">select_by_index</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
<span class="n">select</span><span class="o">.</span><span class="n">select_by_visible_text</span><span class="p">(</span><span class="s">&quot;text&quot;</span><span class="p">)</span>
<span class="n">select</span><span class="o">.</span><span class="n">select_by_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>


<p>WebDriver also provides features for deselecting all the selected options:</p>
<div class="highlight"><pre><span class="n">select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">))</span>
<span class="n">select</span><span class="o">.</span><span class="n">deselect_all</span><span class="p">()</span>
</pre></div>


<p>This will deselect all OPTIONs from the first SELECT on the page.</p>
<p>Suppose in a test, we need the list of all default selected options, 
Select class provides a property method that returns a list:</p>
<div class="highlight"><pre><span class="n">select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">&quot;xpath&quot;</span><span class="p">))</span>
<span class="n">all_selected_options</span> <span class="o">=</span> <span class="n">select</span><span class="o">.</span><span class="n">all_selected_options</span>
</pre></div>


<p>To get all available options:</p>
<div class="highlight"><pre><span class="n">options</span> <span class="o">=</span> <span class="n">select</span><span class="o">.</span><span class="n">options</span>
</pre></div>


<p>Once you've finished filling out the form, you probably want to submit it. 
One way to do this would be to find the “submit” button and click it:</p>
<div class="highlight"><pre><span class="c"># Assume the button has the ID &quot;submit&quot; :)</span>
<span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&quot;submit&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
</pre></div>


<p>Alternatively, WebDriver has the convenience method “submit” on every element. 
If you call this on an element within a form, 
WebDriver will walk up the DOM until it finds the enclosing form and then calls submit on that. 
If the element isn't in a form, then the NoSuchElementException will be raised:</p>
<div class="highlight"><pre><span class="n">element</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
</pre></div>


<h1>Drag and drop</h1>
<p>You can use drag and drop, either moving an element by a certain amount, or on to another element:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">selenium.webdriver</span> <span class="kn">import</span> <span class="n">ActionChains</span>


<span class="n">element</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;source&quot;</span><span class="p">)</span>
<span class="n">target</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;target&quot;</span><span class="p">)</span>
<span class="n">action_chains</span> <span class="o">=</span> <span class="n">ActionChains</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>
<span class="n">action_chains</span><span class="o">.</span><span class="n">drag_and_drop</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
</pre></div>


<h1>Moving between windows and frames</h1>
<p>It's rare for a modern web application not to have any frames or to be constrained to a single window.
WebDriver supports moving between named windows using the “switch_to_window” method:</p>
<div class="highlight"><pre><span class="n">driver</span><span class="o">.</span><span class="n">switch_to_window</span><span class="p">(</span><span class="s">&quot;windowName&quot;</span><span class="p">)</span>
</pre></div>


<p>All calls to driver will now be interpreted as being directed to the particular window.</p>
<p>But how do you know the window's name? Take a look at the javascript or link that opened it:</p>
<div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;somewhere.html&quot;</span> <span class="na">target=</span><span class="s">&quot;windowName&quot;</span><span class="nt">&gt;</span>Click here to open a new window<span class="nt">&lt;/a&gt;</span>
</pre></div>


<p>Alternatively, you can pass a “window handle” to the “switch_to_window()” method. 
Knowing this, it's possible to iterate over every open window like so:</p>
<div class="highlight"><pre><span class="k">for</span> <span class="n">handle</span> <span class="ow">in</span> <span class="n">driver</span><span class="o">.</span><span class="n">window_handles</span><span class="p">:</span>
    <span class="n">driver</span><span class="o">.</span><span class="n">switch_to_window</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
</pre></div>


<p>You can also swing from frame to frame (or into iframes):</p>
<div class="highlight"><pre><span class="n">driver</span><span class="o">.</span><span class="n">switch_to_frame</span><span class="p">(</span><span class="s">&quot;frameName&quot;</span><span class="p">)</span>
</pre></div>


<p>It's possible to access subframes by separating the path with a dot, 
and you can specify the frame by its index too.
That is:</p>
<div class="highlight"><pre><span class="n">driver</span><span class="o">.</span><span class="n">switch_to_frame</span><span class="p">(</span><span class="s">&quot;frameName.0.child&quot;</span><span class="p">)</span>
</pre></div>


<p>would go to the frame named “child” of the first subframe of the frame called “frameName”. 
All frames are evaluated as if from <em>top</em>.
Once we are done with working on frames, we will have to come back to the parent frame which can be done using:</p>
<div class="highlight"><pre><span class="n">driver</span><span class="o">.</span><span class="n">switch_to_default_content</span><span class="p">()</span>
</pre></div>


<h1>Popup dialogs</h1>
<div class="highlight"><pre><span class="n">alert</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">switch_to_alert</span><span class="p">()</span>
</pre></div>


<h1>Navigation: history and location</h1>
<p>navigation is a useful task. </p>
<p>To navigate to a page, you can use get method:</p>
<div class="highlight"><pre><span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;http://www.example.com&quot;</span><span class="p">)</span>
</pre></div>


<p>To move backwards and forwards in your browser's history:</p>
<div class="highlight"><pre><span class="n">driver</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
<span class="n">driver</span><span class="o">.</span><span class="n">back</span><span class="p">()</span>
</pre></div>


<p>Please be aware that this functionality depends entirely on the underlying driver. 
It's just possible that something unexpected may happen when you call these methods 
if you're used to the behaviour of one browser over another.</p>
<h1>Methods of Locating Elements</h1>
<p>There are vaious strategies to locate elements in a page. 
You can use the most appropriate one for your case. </p>
<p>Selenium provides the following methods to locate elements in a page:</p>
<ul>
<li>find_element_by_id</li>
<li>find_element_by_name</li>
<li>find_element_by_xpath</li>
<li>find_element_by_link_text</li>
<li>find_element_by_partial_link_text</li>
<li>find_element_by_tag_name</li>
<li>find_element_by_class_name</li>
<li>find_element_by_css_selector</li>
</ul>
<p>To find multiple elements (these methods will return a list):</p>
<ul>
<li>find_elements_by_name</li>
<li>find_elements_by_xpath</li>
<li>find_elements_by_link_text</li>
<li>find_elements_by_partial_link_text</li>
<li>find_elements_by_tag_name</li>
<li>find_elements_by_class_name</li>
<li>find_elements_by_css_selector</li>
</ul>
<h1>Locating by Id</h1>
<ul>
<li>Use this when you know id attribute of an element.  </li>
<li>With this strategy, the first element with the id attribute value matching the location will be returned.   </li>
<li>If no element has a matching id attribute, a NoSuchElementException
will be raised.<div class="highlight"><pre><span class="n">login_form</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&quot;loginForm&quot;</span><span class="p">)</span>
</pre></div>


</li>
</ul>
<blockquote>
<p><strong>Note:</strong> "ID" is unique in one web page!</p>
</blockquote>
<h1>Locating by Name</h1>
<ul>
<li>Use this when you know name attribute of an element. 
  With this strategy, the first element with the name attribute value matching the location will be returned.  </li>
<li>If no element has a matching name attribute, a NoSuchElementException will be raised.<div class="highlight"><pre><span class="n">username</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;username&quot;</span><span class="p">)</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;password&quot;</span><span class="p">)</span>
</pre></div>


</li>
</ul>
<h1>Locating Hyperlinks by Link Text</h1>
<ul>
<li>Use this when you know link text used within an anchor tag.
  With this strategy, the first element with the link text value matching the location will be returned.  </li>
<li>If no element has a matching link text attribute, a NoSuchElementException will be raised.<div class="highlight"><pre><span class="n">continue_link</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_link_text</span><span class="p">(</span><span class="s">&quot;Continue&quot;</span><span class="p">)</span>
<span class="n">continue_link</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_partial_link_text</span><span class="p">(</span><span class="s">&quot;Conti&quot;</span><span class="p">)</span>
</pre></div>


</li>
</ul>
<h1>Locating by XPath</h1>
<ul>
<li>XPath is the language used for locating nodes in an XML document.</li>
<li>As HTML can be an implementation of XML (XHTML), 
  Selenium users can leverage this powerful language to target elements in their web applications.</li>
<li>One of the main reasons for using XPath is when you don't have a suitable id 
  or name attribute for the element you wish to locate. </li>
<li>You can use XPath to either locate the element in absolute terms (not advised), 
  or relative to an element that does have an id or name attribute. </li>
<li>XPath locators can also be used to specify elements via attributes other than id and name.<div class="highlight"><pre><span class="n">login_form</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">&quot;/html/body/form[1]&quot;</span><span class="p">)</span>
<span class="n">login_form</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">&quot;//form[1]&quot;</span><span class="p">)</span>
<span class="n">login_form</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">&quot;//form[@id=&#39;loginForm&#39;]&quot;</span><span class="p">)</span>
</pre></div>


</li>
</ul>
<p>These examples cover some basics, but in order to learn more, 
the following references are recommended:</p>
<ul>
<li>XPATH tutorial</li>
<li><a href="http://www.w3schools.com/Xpath/">W3Schools XPath Tutorial</a></li>
<li><a href="http://www.w3.org/TR/xpath">W3C XPath Recommendation</a></li>
<li><a href="http://www.zvon.org/comp/r/tut-XPath_1.html">XPath Tutorial - with interactive examples</a>.</li>
</ul>
<h1>CSS Locator</h1>
<ul>
<li>Cascading Style Sheets (CSS).</li>
<li>Selenium WebDriver uses same principles of CSS selectors to locate elements in DOM.   </li>
<li>This is a much faster and more reliable way to locate the elements when compared with XPaths.</li>
</ul>
<p>For instance, consider this page source:</p>
<div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;content&quot;</span><span class="nt">&gt;</span>Site content goes here.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;html&gt;</span>
</pre></div>


<p>The “p” element can be located like this:</p>
<div class="highlight"><pre><span class="n">content</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_css_selector</span><span class="p">(</span><span class="s">&#39;p.content&#39;</span><span class="p">)</span>

<span class="n">login_form</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_css_selector</span><span class="p">(</span><span class="s">&quot;body form&gt;input&quot;</span><span class="p">)</span>
</pre></div>


<ul>
<li>CSS tutorial</li>
<li><a href="http://www.w3school.com.cn/css/">W3Schools CSS Tutorial</a></li>
<li><a href="http://www.w3school.com.cn/css3/index.asp">W3Schools CSS3 Tutorial</a></li>
<li><a href="http://www.w3school.com.cn/cssref/css_selectors.asp">W3Schools CSS Selectors</a></li>
</ul>
<h1>Explicit Waits</h1>
<p>An explicit waits is code you define to wait for a certain condition to occur before proceeding further in the code. 
The worst case of this is time.sleep(), which sets the condition to an exact time period to wait. 
There are some convenience methods provided that help you write code that will wait only as long as required. 
WebDriverWait in combination with ExpectedCondition is one way this can be accomplished.</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.common.by</span> <span class="kn">import</span> <span class="n">By</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.support.ui</span> <span class="kn">import</span> <span class="n">WebDriverWait</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.support</span> <span class="kn">import</span> <span class="n">expected_conditions</span> <span class="k">as</span> <span class="n">EC</span>


<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">()</span>
<span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;http://somedomain/url_that_delays_loading&quot;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">element</span> <span class="o">=</span> <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">until</span><span class="p">(</span><span class="n">EC</span><span class="o">.</span><span class="n">presence_of_element_located</span><span class="p">((</span><span class="n">By</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="s">&quot;myDynamicElement&quot;</span><span class="p">)))</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">driver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</pre></div>


<p>This waits up to 10 seconds before throwing a TimeoutException 
or if it finds the element will return it in 0 - 10 seconds. </p>
<p>WebDriverWait by default calls the ExpectedCondition every 500 milliseconds 
until it returns successfully. 
A successful return is for ExpectedCondition type is Boolean return true 
or not null return value for all other ExpectedCondition types.</p>
<p><strong>Expected Conditions</strong></p>
<p>There are some common conditions that are frequently come across when automating web browsers. 
Listed below are Implementations of each. 
Selenium Python binding provides some convienence methods 
so you don't have to code an expected_condition class yourself or create your own utility package for them.</p>
<ul>
<li>title_is</li>
<li>title_contains</li>
<li>presence_of_element_located</li>
<li>visibility_of_element_located</li>
<li>visibility_of</li>
<li>presence_of_all_elements_located</li>
<li>text_to_be_present_in_element</li>
<li>text_to_be_present_in_element_value</li>
<li>frame_to_be_available_and_switch_to_it</li>
<li>invisibility_of_element_located</li>
<li>element_to_be_clickable - it is Displayed and Enabled.</li>
<li>staleness_of</li>
<li>element_to_be_selected</li>
<li>element_located_to_be_selected</li>
<li>element_selection_state_to_be</li>
<li>element_located_selection_state_to_be</li>
<li>alert_is_present<div class="highlight"><pre><span class="kn">from</span> <span class="nn">selenium.webdriver.support</span> <span class="kn">import</span> <span class="n">expected_conditions</span> <span class="k">as</span> <span class="n">EC</span>

<span class="n">wait</span> <span class="o">=</span> <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">element</span> <span class="o">=</span> <span class="n">wait</span><span class="o">.</span><span class="n">until</span><span class="p">(</span><span class="n">EC</span><span class="o">.</span><span class="n">element_to_be_clickable</span><span class="p">((</span><span class="n">By</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span><span class="s">&#39;someid&#39;</span><span class="p">)))</span>
</pre></div>


</li>
</ul>
<p>The expected_conditions module contains a set of predefined conditions to use with WebDriverWait.</p>
<h1>Implicit Waits</h1>
<p>An implicit wait is to tell WebDriver to poll the DOM for a certain amount of time 
when trying to find an element or elements if they are not immediately available. 
The default setting is 0. <br />
Once set, the implicit wait is set for the life of the WebDriver object instance.</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>


<span class="n">ff</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">()</span>
<span class="n">ff</span><span class="o">.</span><span class="n">implicitly_wait</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c"># seconds</span>
<span class="n">ff</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;http://somedomain/url_that_delays_loading&quot;</span><span class="p">)</span>
<span class="n">myDynamicElement</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&quot;myDynamicElement&quot;</span><span class="p">)</span>
</pre></div>


<h1>Using custom Firefox profile</h1>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>


<span class="n">ff_profile</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">FirefoxProfile</span><span class="p">(</span><span class="s">&quot;/home/ff_profile_dir&quot;</span><span class="p">)</span>
<span class="n">profile</span><span class="o">.</span><span class="n">set_preference</span><span class="p">(</span><span class="s">&#39;browser.download.folderList&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">profile</span><span class="o">.</span><span class="n">set_preference</span><span class="p">(</span><span class="s">&#39;browser.download.manager.showWhenStarting&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">(</span><span class="n">ff_profile</span><span class="p">)</span>
</pre></div>


<h1>Using a Proxy</h1>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>


<span class="n">PROXY</span> <span class="o">=</span> <span class="s">&quot;localhost:8080&quot;</span>

<span class="c"># Create a copy of desired capabilities object.</span>
<span class="n">desired_capabilities</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">DesiredCapabilities</span><span class="o">.</span><span class="n">INTERNETEXPLORER</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="c"># Change the proxy properties of that copy.</span>
<span class="n">desired_capabilities</span><span class="p">[</span><span class="s">&#39;proxy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                                <span class="s">&quot;httpProxy&quot;</span><span class="p">:</span><span class="n">PROXY</span><span class="p">,</span>
                                <span class="s">&quot;ftpProxy&quot;</span><span class="p">:</span><span class="n">PROXY</span><span class="p">,</span>
                                <span class="s">&quot;sslProxy&quot;</span><span class="p">:</span><span class="n">PROXY</span><span class="p">,</span>
                                <span class="s">&quot;noProxy&quot;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>
                                <span class="s">&quot;proxyType&quot;</span><span class="p">:</span><span class="s">&quot;MANUAL&quot;</span><span class="p">,</span>
                                <span class="s">&quot;class&quot;</span><span class="p">:</span><span class="s">&quot;org.openqa.selenium.Proxy&quot;</span><span class="p">,</span>
                                <span class="s">&quot;autodetect&quot;</span><span class="p">:</span><span class="bp">False</span><span class="p">}</span>

<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Remote</span><span class="p">(</span><span class="s">&quot;http://localhost:4444/wd/hub&quot;</span><span class="p">,</span> <span class="n">desired_capabilities</span><span class="p">)</span>
</pre></div>


<h1>Using other web browser webdriver</h1>
<blockquote>
<p><strong>NOTE:</strong>You need to download the special webdriver
Such as using ChromeDriver
Firstly, download the latest chromedriver from <a href="http://chromedriver.storage.googleapis.com/index.html">download page</a>. 
Then unzip the file:</p>
</blockquote>
<p>You should see a chromedriver executable. Now you can create an instance of Chrome WebDriver like this:</p>
<div class="highlight"><pre><span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Chrome</span><span class="p">(</span><span class="n">executable_path</span><span class="o">=</span><span class="s">&quot;/path/to/chromedriver&quot;</span><span class="p">)</span>
</pre></div>


<p>The rest of the example should work as given in other other documentation.</p>
<h1>Selenium Grid</h1>
<ul>
<li>
<p>Firstly, Run the hub</p>
<div class="highlight"><pre><span class="nv">$ </span>java -jar selenium-server-standalone.jar -role hub
</pre></div>


</li>
<li>
<p>Secondly, Run the node (with Firefox browser)</p>
<div class="highlight"><pre><span class="nv">$ </span>java -jar selenium-server-standalone.jar -role node <span class="se">\</span>
  -hub http://selenium-srv-fqdn:4444/grid/register -browser <span class="nv">browserName</span><span class="o">=</span>firefox
</pre></div>


</li>
<li>
<p>Code</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>

<span class="n">desired_capabilities</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;browserName&#39;</span><span class="p">:</span> <span class="s">&#39;firefox&#39;</span><span class="p">}</span>
<span class="n">ff</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Remote</span><span class="p">(</span><span class="s">&#39;http://selenium-srv-fqdn:4444/wd/hub&#39;</span><span class="p">,</span> <span class="n">desired_capabilities</span><span class="p">)</span>
</pre></div>


</li>
<li>
<p>More information about Selenium Grid you can refer to <a href="https://code.google.com/p/selenium/wiki/Grid2">this page</a></p>
</li>
</ul>
<h1>Test design</h1>
<h3>Test design with page object</h3>
<h4>Page Object (PO)</h4>
<p>A POs simply model areas of the app's UI as objects within the test code. 
This reduces the amount of duplicated code and if the UI changes, 
the fix need only be applied in one place.<br />
There is clean separation between test code and page specific code.</p>
<p>Summary</p>
<ul>
<li>the public methods represent the services that the page</li>
<li>offers try not to expose the internals of the page generally don't</li>
<li>make assertions (except initial verification) methods return other POs</li>
<li>need not represent an entire page different results for the same</li>
<li>action are modelled as different methods</li>
</ul>
<h4>Simple login test (without design)</h4>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>


<span class="k">def</span> <span class="nf">login_test</span><span class="p">():</span>
    <span class="n">ff</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">()</span>
    <span class="n">ff</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;http://fqdn/login&#39;</span><span class="p">)</span>

    <span class="n">username</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&#39;user_name&#39;</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&#39;password&#39;</span><span class="p">)</span>
    <span class="n">submit_btn</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&#39;submit_button&#39;</span><span class="p">)</span>

    <span class="n">username</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s">&#39;admin&#39;</span><span class="p">)</span>
    <span class="n">password</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s">&#39;123456&#39;</span><span class="p">)</span>
    <span class="n">submit_btn</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="k">assert</span> <span class="s">&#39;Welcome&#39;</span> <span class="ow">in</span> <span class="n">ff</span><span class="o">.</span><span class="n">title</span>
</pre></div>


<blockquote>
<p>Pros: simple, easy to understand  <br />
Cons: not reusable (against DRY principle), hard to maintain    </p>
</blockquote>
<h4>Page Object (PO) example</h4>
<p><strong>Instead of this:</strong></p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">login_test</span><span class="p">():</span>
    <span class="n">ff</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">()</span>
    <span class="n">ff</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;http://example.com/login&#39;</span><span class="p">)</span>

    <span class="n">username</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&#39;user_name&#39;</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&#39;password&#39;</span><span class="p">)</span>
    <span class="n">submit_btn</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&#39;submit_button&#39;</span><span class="p">)</span>
    <span class="o">...</span>
    <span class="o">...</span>
</pre></div>


<p><strong>Use this:</strong></p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">login_test</span><span class="p">():</span>
    <span class="n">ff</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">()</span>
    <span class="n">ff</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;http://example.com/login&#39;</span><span class="p">)</span>

    <span class="n">login_page</span> <span class="o">=</span> <span class="n">LoginPage</span><span class="p">(</span><span class="n">ff</span><span class="p">)</span>
    <span class="n">login_page</span><span class="o">.</span><span class="n">login_user</span><span class="p">(</span><span class="s">&#39;admin&#39;</span><span class="p">,</span> <span class="s">&#39;123456&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="s">&#39;Welcome&#39;</span> <span class="ow">in</span> <span class="n">ff</span><span class="o">.</span><span class="n">title</span>
</pre></div>


<h3>Test design with UI mapping</h3>
<h4>UI mapping</h4>
<p>A UI map is a mechanism that stores all the locators for a test suite 
in one place for easy modification when identifiers or paths to UI elements change.</p>
<p>Pros</p>
<ul>
<li>centralized location for UI objects instead of having them scattered throughout the script (better maintenance)</li>
<li>cryptic HTML identifiers and names can be given more human-readable names
(better readability)</li>
</ul>
<h4>How to locate elements on page:</h4>
<p>id, xpath, link text, partial link text, name, tag name, class name, css selector
driver.find_element_by_...
driver.find_elements_by_...
driver.find_element(by=, value=)</p>
<h4>UI mapping example</h4>
<p><strong>Instead of this:</strong></p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">login_test</span><span class="p">():</span>
    <span class="o">...</span>
    <span class="o">...</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">&#39;//path[1]/to[2]/username[@type=&quot;element&quot;]&#39;</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">&#39;//path[2]/to[2]/password[@type=&quot;element&quot;]&#39;</span><span class="p">)</span>
</pre></div>


<p><strong>Use this</strong></p>
<div class="highlight"><pre><span class="n">login_page_map</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span>
        <span class="n">username</span> <span class="o">=</span> <span class="s">&#39;//path[1]/to[2]/imput[@title=&quot;Username&quot;]&#39;</span><span class="p">,</span>
        <span class="n">password</span> <span class="o">=</span> <span class="s">&#39;//path[2]/to[2]/input[@type=&quot;password&quot;]&#39;</span><span class="p">,)</span>

<span class="k">def</span> <span class="nf">login_test</span><span class="p">():</span>
    <span class="o">...</span>
    <span class="o">...</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="n">login_page_map</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="n">login_page_map</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
</pre></div>


<h3>Example - Page Object with UI map</h3>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">selenium.webdriver.common.by</span> <span class="kn">import</span> <span class="n">By</span>


<span class="n">login_page_map</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span>
        <span class="n">username</span> <span class="o">=</span> <span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s">&#39;//path[1]/to[2]/imput[@title=&quot;Username&quot;]&#39;</span><span class="p">),</span>
        <span class="n">password</span> <span class="o">=</span> <span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">XPATH</span><span class="p">,</span> <span class="s">&#39;//path[2]/to[2]/input[@type=&quot;password&quot;]&#39;</span><span class="p">),)</span>

<span class="k">class</span> <span class="nc">LoginPage</span><span class="p">(</span><span class="n">PageObject</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">driver</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span> <span class="o">=</span> <span class="n">driver</span>
        <span class="k">assert</span> <span class="s">&#39;Login&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">title</span>

<span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">login_page_map</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
<span class="n">password</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">login_page_map</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">login_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
</pre></div>


<h4>Login test example - test itself</h4>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">login_test</span><span class="p">():</span>
    <span class="n">ff</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">()</span>
    <span class="n">ff</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;http://example.com/login&#39;</span><span class="p">)</span>
    <span class="n">login_page</span> <span class="o">=</span> <span class="n">LoginPage</span><span class="p">(</span><span class="n">ff</span><span class="p">)</span>
    <span class="n">login_page</span><span class="o">.</span><span class="n">login_user</span><span class="p">(</span><span class="s">&#39;admin&#39;</span><span class="p">,</span> <span class="s">&#39;123456&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="s">&#39;Welcome&#39;</span> <span class="ow">in</span> <span class="n">ff</span><span class="o">.</span><span class="n">title</span>
</pre></div>


<h3>UI map is done via pageElement decorator</h3>
<p><strong>Instead of</strong></p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">LoginPage</span><span class="p">(</span><span class="n">PageObject</span><span class="p">):</span>
    <span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="n">login_page_map</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="n">login_page_map</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
</pre></div>


<p><strong>Use</strong></p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">LoginPage</span><span class="p">(</span><span class="n">PageObject</span><span class="p">):</span>

    <span class="nd">@pageElement</span><span class="p">(</span><span class="n">login_page_map</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">username</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@pageElement</span><span class="p">(</span><span class="n">login_page_map</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">password</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>


<h1>Learn more to</h1>
<ul>
<li>http://docs.seleniumhq.org/</li>
<li>https://selenium-python.readthedocs.org/</li>
</ul>
            </div>
            <!-- /.entry-content -->
    <hr />
    <!-- AddThis Button BEGIN -->
    <div class="addthis_toolbox addthis_default_style">
            <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
            <a class="addthis_button_tweet"></a>
            <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    </div>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5401ce80217a6518"></script>
    <!-- AddThis Button END -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'xgao'; // required: replace example with your forum shortname

                    var disqus_identifier = 'webui-testing-with-selenium';
                var disqus_url = './webui-testing-with-selenium.html';

            var disqus_config = function () {
                this.language = "zh";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3 well well-sm" id="sidebar">

<aside>
    <section>
        <ul class="list-group list-group-flush">
                <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
                  <ul class="list-group" id="social">
                    <li class="list-group-item"><a href="http://twitter.com/xgao622"><i class="fa fa-twitter-square fa-lg"></i> twitter</a></li>
                    <li class="list-group-item"><a href="http://weibo.com/u/1165638253"><i class="fa fa-weibo fa-lg"></i> weibo</a></li>
                    <li class="list-group-item"><a href="https://github.com/idumpling"><i class="fa fa-github-square fa-lg"></i> github</a></li>
                  </ul>
                </li>



                <li class="list-group-item"><a href="./"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                    <ul class="list-group " id="tags">
                        <li class="list-group-item tag-1">
                            <a href="./tag/python.html">
                                python
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="./tag/autotest.html">
                                autotest
                            </a>
                        </li>
                        <li class="list-group-item tag-5">
                            <a href="./tag/selenium.html">
                                selenium
                            </a>
                        </li>
                        <li class="list-group-item tag-5">
                            <a href="./tag/programming.html">
                                programming
                            </a>
                        </li>
                        <li class="list-group-item tag-5">
                            <a href="./tag/travel.html">
                                travel
                            </a>
                        </li>
                        <li class="list-group-item tag-5">
                            <a href="./tag/unittest.html">
                                unittest
                            </a>
                        </li>
                    </ul>
                </li>    

        </ul>
    </section>

</aside>        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2014 Xin Gao
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="./theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="./theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="./theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'xgao'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
</body>
</html>